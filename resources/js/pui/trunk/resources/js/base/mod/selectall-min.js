KISSY.add("mod/selectall",function(a,b){PW.namespace("selectAll");PW.namespace("SelectAll");PW.namespace("mod.Selectall");PW.selectall=PW.Selectall=PW.mod.Selectall=function(c){return new b(c);};},{requires:["selectall/base"]});KISSY.add("selectall/base",function(e){var f=e.DOM,d=f.get,h=f.query,c=e.Event,b=c.on,a={root:"",select:"",filter:"",allTrigger:".pw-select-all",cancelTrigger:".pw-cancel-all",invertTrigger:".pw-invert",toggleTrigger:".pw-toggle"};function g(j){var i=this;this.opts=e.merge(a,j);this.checkboxs;this.init();}e.augment(g,e.EventTarget);e.augment(g,{init:function(){var i=this;i.rootDOM=d(this.opts.root);i.selectAllBtn=d(i.opts.allTrigger);i.cancelBtn=d(i.opts.cancelTrigger);i.invertBtn=d(i.opts.invertTrigger);i.toggleTrigger=d(i.opts.toggleTrigger);i.status=true;i._bindEvt();},enable:function(){var i=this;if(!i.status){i._bindEvt();i.status=true;}},disable:function(){var i=this;if(i.status&&i.status==true){i._unbindEvt();i.toggleTrigger.disabled=true;i.status=false;}},_bindEvt:function(){var i=this;i._bindRegisteredEvent();i._bindSelectAll();i._bindCancel();i._bindInvert();i._bindToggle();},_unbindEvt:function(){var i=this;c.detach(i.selectAllBtn,"click");c.detach(i.cancelBtn,"click");c.detach(i.invertBtn,"click");c.detach(i.toggleTrigger,"click");},_bindRegisteredEvent:function(){var j=this,i;j._getCheckBox();i=j.checkboxs;b(i,"click",function(l){var k=l.target;j.toggleTrigger.checked=j.hasSelectedAll()?true:false;});},_bindSelectAll:function(){var k=this,j=k.selectAllBtn,i;b(j,"click",function(l){k._selectAll();k.fire("all",{select:k});});},_bindCancel:function(){var k=this,j=k.cancelBtn,i;b(j,"click",function(l){k._unSelectAll();k.fire("cancel",{select:k});});},_bindInvert:function(){var k=this,j=k.invertBtn,i;b(j,"click",function(l){k._getCheckBox();i=k.checkboxs;e.each(i,function(m){m.checked=(m.checked)?false:true;});k.fire("invert",{select:k});});},_bindToggle:function(){var k=this,i=k.toggleTrigger,j;if(!i){return;}if(i.nodeName.toLowerCase()=="input"&&i.getAttribute("type")=="checkbox"){b(i,"click",function(l){j=k._getCheckBox();if(!i.checked){k._unSelectAll();k.fire("toggle",{type:"unselect",select:k});}else{k._selectAll();k.fire("toggle",{type:"select",select:k});}});}else{b(i,"click",function(l){j=k._getCheckBox();if(k.hasSelectedAll()){k._unSelectAll();k.fire("toggle",{type:"unselect",select:k});}else{k._selectAll();k.fire("toggle",{type:"select",select:k});}});}},hasSelectedAll:function(){var p=this,n=p._getCheckBox(),k=true;for(var m=0,j=n.length;m<j;m++){var o=n[m];if(!o.checked){k=false;break;}continue;}return k;},_selectAll:function(){var j=this,i=j._getCheckBox();e.each(i,function(k){k.checked=true;});},_unSelectAll:function(){var j=this,i=j._getCheckBox();e.each(i,function(k){k.checked=false;});},_getCheckBox:function(){var j=this,i=h(j.opts.select,j.rootDOM);j._getIllegalCheckboxs();j.checkboxs=e.filter(i,j._filter,j);return j.checkboxs;},_getIllegalCheckboxs:function(){var j=this,i=h(j.opts.filter,j.rootDOM);j.illegalCheckbox=[];e.each(i,function(l){if(l.nodeName.toLowerCase()=="input"&&f.prop(l,"type")=="checkbox"){j.illegalCheckbox.push(l);}else{var k=h(j.opts.select,l);if(k.length>0){e.each(k,function(m){j.illegalCheckbox.push(m);});}}});},_filter:function(p){var n=this,m=n.illegalCheckbox,j=true;if(p.nodeName.toLowerCase()=="input"&&f.prop(p,"type")=="checkbox"){for(var l=0;l<m.length;l++){var k=m[l];if(k==p){j=false;break;}}return j;}}});return g;},{requires:["core","sizzle"]});