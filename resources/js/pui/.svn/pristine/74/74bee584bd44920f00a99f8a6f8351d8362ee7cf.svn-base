KISSY.add("mod/loading-tip",function(b,a){PW.namespace("mod.LoadingTip");PW.mod.LoadingTip=function(c){return new a(c);};},{requires:["loadingTip/core"]});KISSY.add("loadingTip/core",function(d){var l=d.DOM,b=l.get,i=l.query,f=d.all,h=PW.juicer,k={renderTo:"",hint:"",width:200,topLayer:0,bgColor:"#000",opacity:0.6,theme:"a",themeUrl:PW.libUrl+"js/base/assets/loadingTip/css/style.css"},e='<div class="pw-loading-tip theme-&{theme}"><i class="loading-icon"></i><div class="loading-content">&{content}</div></div>',a=PW.modSettings.loadingTip||{},c=200,j=0.2;function g(m){this.opts=d.merge(k,a,m);this.overlay;this.win;this.doc;this.tipEl;this.init();}d.augment(g,d.augment,{init:function(){var m=this;m._createOverlay();m._loadStyle(function(){});m.addEvtDispatcher();},addEvtDispatcher:function(){var m=this;m.overlay.on("resize",function(n){m._fixStyle();});},refresh:function(){var m=this;m.remove();m.init();},render:function(){var m=this;m._render();},show:function(m){var n=this;n.render();if(d.isFunction(m)){m(n);}},hide:function(m){var r=this,q=r.tipEl,n=r.overlay,s=f(q),o=parseInt(s.css("top")),p=s.outerHeight();s.animate({top:o-p,opacity:0},j,"",function(){n.hide();if(d.isFunction(m)){m(r);}});},remove:function(){var p=this,o=p.tipEl,q=f(o),m=parseInt(q.css("top")),n=q.outerHeight();q.animate({top:m-n,opacity:0},j,"",function(){p.overlay.destroy();});},_render:function(){var n=this,m=n.opts;n._createTipEl();n.overlay.setContent(n.tipEl);n.overlay.render();n._fixStyle();},_createOverlay:function(){var n=this,m=n.opts;n.overlay=PW.mod.Overlay({renderTo:m.renderTo,zIndex:m.zIndex,opacity:m.opacity,bgColor:m.bgColor,topLayer:m.topLayer});n.win=n.overlay.win;n.doc=n.overlay.doc;},_createTipEl:function(){var p=this,o=p.opts,n,m="",q=b(o.hint);if(d.isString(o.hint)&&!q){m=h(e,{theme:o.theme,content:o.hint});n=l.create(m,{},p.doc);}if(q!=null){m=h(e,{theme:o.theme,content:""});n=l.create(m,p.doc);l.append(o.hint,n);}p.tipEl=n;},_fixStyle:function(){var s=this,r=s.opts,q=s.tipEl,m=l.width(q),o=l.outerHeight(q),n=s.overlay,p=n.w,t=n.h;l.css(q,{left:(p-r.width)/2,top:(t-o)/2,width:r.width,opacity:1});},_loadStyle:function(m){var p=this,o=p.opts,n=o.themeUrl;d.loadCSS(n,{success:function(){m.call(p,true);},error:function(){m.call(p,false);}},p.doc);}});return g;},{requires:["core","mod/overlay","mod/juicer","mod/ext"]});