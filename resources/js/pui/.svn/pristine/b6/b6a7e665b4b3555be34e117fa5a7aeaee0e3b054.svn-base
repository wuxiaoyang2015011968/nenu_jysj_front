/*
Copyright 2012, KISSY UI Library v1.20
MIT Licensed
build time: May 8 19:42
*/
KISSY.add("event/base",function(b,c,d,a,l){function g(b,c){var h=p._data(b);return(h&&h.events||{})[c]||[]}function k(b,c){for(var h=g(b,c.type).slice(0),a,i,d=0,q=h.length;d<q&&!(a=h[d],a=a.fn.call(a.scope||b,c,a.data),a!==l&&(!1!==i&&(i=a),!1===a&&c.halt()),c.isImmediatePropagationStopped);++d);return i}function f(b,c,h,a,i){var d=u[c]||{};!a.length&&(!d.setup||!1===d.setup.call(b))&&m(b,c,h);d.add&&d.add.call(b,i)}var j=a.isValidTarget,h=a.isIdenticalHandler,i=a.batchForType,n=a.simpleRemove,m=
a.simpleAdd,e=a.splitAndRun,o=c._nodeName,q=b.makeArray,r=b.each,t=b.trim,s="",w="trigger-none-"+b.now(),u={},v="ksEventTargetId"+b.now(),p={_clone:function(b,h){if(h.nodeType===c.ELEMENT_NODE&&p._hasData(b)){var a=p._data(b).events;r(a,function(b,c){r(b,function(b){p.on(h,c,b.fn,b.scope,b.data)})})}},_hasData:function(b){return c.hasData(b,v)},_data:function(b){var h=q(arguments);h.splice(1,0,v);return c.data.apply(c,h)},_removeData:function(b){var h=q(arguments);h.splice(1,0,v);return c.removeData.apply(c,
h)},special:u,__add:function(c,a,i,g,l,q){var e;if(a&&b.isFunction(g)&&(!c||j(a))){(e=p._data(a))||p._data(a,e={});var n=e.events=e.events||{},n=n[i]=n[i]||[],g={fn:g,scope:l,data:q},m=e.handler;m||(m=e.handler=function(c,a){if(!(c&&c.type==s)){var h=m.target;if(!c||!c.fixed)c=new d(h,c);var i=c.type;b.isPlainObject(a)&&b.mix(c,a);i&&(c.type=i);return k(h,c)}},m.target=a);for(e=n.length-1;0<=e;--e)if(h(n[e],g,a))return;c&&(f(a,i,m,n,g),a=null);n.push(g)}},add:function(b,a,h,d,g){a=t(a);if(i(p,"add",
b,a,h,d,g))return b;c.query(b).each(function(b){p.__add(!0,b,a,h,d,g)});return b},__remove:function(c,a,i,d,g,q){if(a&&(!c||j(a))){var e=p._data(a),f=e&&e.events,k,m,o,r=c&&u[i]||{};if(f)if(i){if(k=f[i]){m=k.length;if(d&&m){var t={data:q,fn:d,scope:g},s,q=g=0;for(o=[];g<m;++g)s=k[g],h(s,t,a)?r.remove&&r.remove.call(a,s):o[q++]=s;f[i]=o;m=o.length}if(d===l||0===m)c&&(!r.tearDown||!1===r.tearDown.call(a))&&n(a,i,e.handler),delete f[i]}b.isEmptyObject(f)&&(e.handler.target=null,delete e.handler,delete e.events,
p._removeData(a))}else for(i in f)p.__remove(c,a,i)}},remove:function(b,a,h,d,g){a=t(a);if(i(p,"remove",b,a,h,d))return b;c.query(b).each(function(b){p.__remove(!0,b,a,h,d,g)});return b},_handle:k,fire:function(a,h,i,g){var q=!0,h=t(h);if(-1<h.indexOf(" "))return e(h,function(b){q=p.fire(a,b,i,g)&&q}),q;i=i||{};i.type=h;c.query(a).each(function(a){var c=h,e=i;if(j(a)){var f,n=!0;e instanceof d?f=e:(f=new d(a,l,c),b.mix(f,e));f.type=c;g&&f.halt();var e=a,m="on"+c;do f.currentTarget=e,k(e,f),e[m]&&
!1===e[m].call(e)&&f.preventDefault(),e=e.parentNode||e.ownerDocument||e===a.ownerDocument&&window;while(e&&!f.isPropagationStopped);if(f.isDefaultPrevented)n=!1;else if(!("click"===c&&o(a,"a"))){var r;try{m&&a[c]&&((r=a[m])&&(a[m]=null),s=c,a[c]())}catch(t){}r&&(a[m]=r);s=w}a=n}else a=!1;q=a&&q});return q}};p.__getListeners=g;p.on=p.add;p.detach=p.remove;return p},{requires:["dom","./object","./utils"]});
KISSY.add("event/change",function(b,c,d,a){b=document.documentMode;if(c.ie&&(9>c.ie||b&&9>b)){var l=/^(?:textarea|input|select)$/i,g=function(a){a=a.type;return"checkbox"==a||"radio"==a};d.special.change={setup:function(){if(l.test(this.nodeName))if(g(this))d.on(this,"propertychange",k),d.on(this,"click",f);else return!1;else d.on(this,"beforeactivate",j)},tearDown:function(){if(l.test(this.nodeName))if(g(this))d.remove(this,"propertychange",k),d.remove(this,"click",f);else return!1;else d.remove(this,
"beforeactivate",j),a.query("textarea,input,select",this).each(function(a){a.__changeHandler&&(a.__changeHandler=0,d.remove(a,"change",h))})}};var k=function(a){"checked"==a.originalEvent.propertyName&&(this.__changed=1)},f=function(a){this.__changed&&(this.__changed=0,d.fire(this,"change",a))},j=function(a){a=a.target;l.test(a.nodeName)&&!a.__changeHandler&&(a.__changeHandler=1,d.on(a,"change",h))},h=function(a){if(!g(this)){var b;(b=this.parentNode)&&d.fire(b,"change",a)}}}},{requires:["ua","./base",
"dom"]});
KISSY.add("event/delegate",function(b,c,d,a){function l(a,b){if(void 0===a.fn&&void 0===a.selector)return!0;if(void 0===a.fn)return this.selector==a.selector;var c=this.scope||b,g=a.scope||b;return this.fn==a.fn&&this.selector==a.selector&&c==g}function g(a,b){var g=c.closest(a.target,[b.selector],this);if(g){for(var d=a.currentTarget,e=0;e<g.length&&!(a.currentTarget=g[e],!1===b.fn.call(b.scope||this,a)&&a.halt(),a.isPropagationStopped);e++);a.currentTarget=d}}function k(a,b){var g,d=a.target,e=
a.relatedTarget;a.type=b.preType;if((d=c.closest(d,b.selector,this))&&d!==e&&(!e||!c.contains(d,e)))e=a.currentTarget,a.currentTarget=d,g=b.fn.call(b.scope||this,a),a.currentTarget=e;return g}var f=a.batchForType,j={focus:{type:"focusin"},blur:{type:"focusout"},mouseenter:{type:"mouseover",handler:k},mouseleave:{type:"mouseout",handler:k}};b.mix(d,{delegate:function(a,b,k,m,e){if(f(d,"delegate",a,b,k,m,e))return a;c.query(a).each(function(a){var c=b,h=g;j[b]&&(b=j[c].type,h=j[c].handler||h);d.on(a,
b,h,a,{fn:m,selector:k,preType:c,scope:e,equals:l})});return a},undelegate:function(a,b,k,m,e){if(f(d,"undelegate",a,b,k,m,e))return a;c.query(a).each(function(a){var c=b,h=g;j[b]&&(b=j[c].type,h=j[c].handler||h);d.remove(a,b,h,a,{fn:m,selector:k,preType:c,scope:e,equals:l})});return a}});return d},{requires:["dom","./base","./utils"]});
KISSY.add("event/focusin",function(b,c,d){c.ie||b.each([{name:"focusin",fix:"focus"},{name:"focusout",fix:"blur"}],function(a){function b(c){return d.fire(c.target,a.name)}var c=0;d.special[a.name]={setup:function(){0===c++&&document.addEventListener(a.fix,b,!0)},tearDown:function(){0===--c&&document.removeEventListener(a.fix,b,!0)}}});return d},{requires:["ua","./base"]});
KISSY.add("event/hashchange",function(b,c,d,a){var l=document,a=l.documentMode||a.ie;if(!("onhashchange"in window)||a&&8>a){var g=window,k="<html><head><title>"+(l.title||"")+" - {hash}</title>{head}</head><body>{hash}</body></html>",f=function(){return"#"+location.href.replace(/^[^#]*#?(.*)$/,"$1")},j,h,i=function(){var a=f();a!==h&&(h=a,n(a));j=setTimeout(i,50)},n=a&&8>a?function(a){var a=b.substitute(k,{hash:b.escapeHTML(a),head:d._isCustomDomain()?"<script>document.domain = '"+l.domain+"';<\/script>":
""}),c=o.contentWindow.document;try{c.open(),c.write(a),c.close()}catch(g){}}:function(){c.fire(g,"hashchange")},m=function(){j||i()},e=function(){j&&clearTimeout(j);j=0},o;8>a&&(m=function(){if(!o){var a=d._genEmptyIframeSrc();o=d.create("<iframe "+(a?'src="'+a+'"':"")+' style="display: none" height="0" width="0" tabindex="-1" title="empty"/>');d.prepend(o,l.documentElement);c.add(o,"load",function(){c.remove(o,"load");n(f());c.add(o,"load",e);i()});l.onpropertychange=function(){try{"title"===event.propertyName&&
(o.contentWindow.document.title=l.title+" - "+f())}catch(a){}};var e=function(){var a=b.trim(o.contentWindow.document.body.innerText),d=f();a!=d&&(h=location.hash=a);c.fire(g,"hashchange")}}},e=function(){j&&clearTimeout(j);j=0;c.detach(o);d.remove(o);o=0});c.special.hashchange={setup:function(){if(this===g){h=f();m()}},tearDown:function(){this===g&&e()}}}},{requires:["./base","dom","ua"]});
KISSY.add("event/keycodes",function(){var b={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,
WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,
MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(c){if(c.altKey&&!c.ctrlKey||c.metaKey||c.keyCode>=b.F1&&c.keyCode<=b.F12)return!1;switch(c.keyCode){case b.ALT:case b.CAPS_LOCK:case b.CONTEXT_MENU:case b.CTRL:case b.DOWN:case b.END:case b.ESC:case b.HOME:case b.INSERT:case b.LEFT:case b.MAC_FF_META:case b.META:case b.NUMLOCK:case b.NUM_CENTER:case b.PAGE_DOWN:case b.PAGE_UP:case b.PAUSE:case b.PHANTOM:case b.PRINT_SCREEN:case b.RIGHT:case b.SHIFT:case b.UP:case b.WIN_KEY:case b.WIN_KEY_RIGHT:return!1;
default:return!0}},isCharacterKey:function(c){if(c>=b.ZERO&&c<=b.NINE||c>=b.NUM_ZERO&&c<=b.NUM_MULTIPLY||c>=b.A&&c<=b.Z||goog.userAgent.WEBKIT&&0==c)return!0;switch(c){case b.SPACE:case b.QUESTION_MARK:case b.NUM_PLUS:case b.NUM_MINUS:case b.NUM_PERIOD:case b.NUM_DIVISION:case b.SEMICOLON:case b.DASH:case b.EQUALS:case b.COMMA:case b.PERIOD:case b.SLASH:case b.APOSTROPHE:case b.SINGLE_QUOTE:case b.OPEN_SQUARE_BRACKET:case b.BACKSLASH:case b.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};return b});
KISSY.add("event/mouseenter",function(b,c,d,a){a.ie||b.each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(a){function b(g){var f=g.relatedTarget;g.type=a.name;try{if(!f||f===document||f.parentNode)f!==this&&(!f||!d.contains(this,f))&&c._handle(this,g)}catch(j){}}c.special[a.name]={setup:function(){c.add(this,a.fix,b)},tearDown:function(){c.remove(this,a.fix,b)}}});return c},{requires:["./base","dom","ua"]});
KISSY.add("event/mousewheel",function(b,c,d,a,l){function g(a){var d,g,f,e=a.detail;a.wheelDelta&&(f=a.wheelDelta/120);a.detail&&(f=-(0==e%3?e/3:e));void 0!==a.axis&&(a.axis===a.HORIZONTAL_AXIS?(g=0,d=-1*f):a.axis===a.VERTICAL_AXIS&&(d=0,g=f));void 0!==a.wheelDeltaY&&(g=a.wheelDeltaY/120);void 0!==a.wheelDeltaX&&(d=-1*a.wheelDeltaX/120);!d&&!g&&(g=f);a=new l(this,a);b.mix(a,{deltaY:g,delta:f,deltaX:d,type:"mousewheel"});return c._handle(this,a)}var k=d.gecko?"DOMMouseScroll":"mousewheel",f=a.simpleRemove,
j=a.simpleAdd;c.special.mousewheel={setup:function(){var a;a=c._data(this)[a]=b.bind(g,this);j(this,k,a)},tearDown:function(){var a,b=c._data(this);a=b[a];f(this,k,a);delete b[a]}}},{requires:["./base","ua","./utils","./object"]});
KISSY.add("event/object",function(b,c){function d(a,b,c){this.currentTarget=a;this.originalEvent=b||{};b?(this.type=b.type,this._fix()):(this.type=c,this.target=a);this.currentTarget=a;this.fixed=!0}var a=document,l="altKey,attrChange,attrName,bubbles,button,cancelable,charCode,clientX,clientY,ctrlKey,currentTarget,data,detail,eventPhase,fromElement,handler,keyCode,metaKey,newValue,offsetX,offsetY,originalTarget,pageX,pageY,prevValue,relatedNode,relatedTarget,screenX,screenY,shiftKey,srcElement,target,toElement,view,wheelDelta,which,axis".split(",");b.augment(d,
{_fix:function(){for(var b=this.originalEvent,d=l.length,f,j=this.currentTarget,j=9===j.nodeType?j:j.ownerDocument||a;d;)f=l[--d],this[f]=b[f];this.target||(this.target=this.srcElement||a);3===this.target.nodeType&&(this.target=this.target.parentNode);!this.relatedTarget&&this.fromElement&&(this.relatedTarget=this.fromElement===this.target?this.toElement:this.fromElement);this.pageX===c&&this.clientX!==c&&(b=j.documentElement,d=j.body,this.pageX=this.clientX+(b&&b.scrollLeft||d&&d.scrollLeft||0)-
(b&&b.clientLeft||d&&d.clientLeft||0),this.pageY=this.clientY+(b&&b.scrollTop||d&&d.scrollTop||0)-(b&&b.clientTop||d&&d.clientTop||0));this.which===c&&(this.which=this.charCode===c?this.keyCode:this.charCode);this.metaKey===c&&(this.metaKey=this.ctrlKey);!this.which&&this.button!==c&&(this.which=this.button&1?1:this.button&2?3:this.button&4?2:0)},preventDefault:function(){var a=this.originalEvent;a.preventDefault?a.preventDefault():a.returnValue=!1;this.isDefaultPrevented=!0},stopPropagation:function(){var a=
this.originalEvent;a.stopPropagation?a.stopPropagation():a.cancelBubble=!0;this.isPropagationStopped=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=!0;this.stopPropagation()},halt:function(a){a?this.stopImmediatePropagation():this.stopPropagation();this.preventDefault()}});return d});
KISSY.add("event/submit",function(b,c,d,a){b=document.documentMode;if(c.ie&&(9>c.ie||b&&9>b)){var l=a._nodeName;d.special.submit={setup:function(){if(l(this,"form"))return!1;d.on(this,"click keypress",g)},tearDown:function(){if(l(this,"form"))return!1;d.remove(this,"click keypress",g);a.query("form",this).each(function(a){a.__submit__fix&&(a.__submit__fix=0,d.remove(a,"submit",k))})}};var g=function(a){a=a.target;if((a=l(a,"input")||l(a,"button")?a.form:null)&&!a.__submit__fix)a.__submit__fix=1,d.on(a,
"submit",k)},k=function(a){this.parentNode&&d.fire(this.parentNode,"submit",a)}}},{requires:["ua","./base","dom"]});
KISSY.add("event/target",function(b,c,d,a,l){function g(a,c,e){if(e instanceof d)return e.currentTarget=a,e;a=new d(a,l,c);b.isPlainObject(e)&&b.mix(a,e);a.type=c;return a}function k(a){a[i]=a[i]||{};return a[i]}function f(a){a[e]=a[e]||{};return a[e]}function j(a,b){var c=k(a);return c[b]&&c[b].bubbles||c[o]&&c[o].bubbles}function h(a){return function(b,d,e){var g=this,b=n(b);m(b,function(b){c["__"+a](!1,g,b,d,e)});return g}}var i="__~ks_publish",n=b.trim,m=a.splitAndRun,e="__~ks_bubble_targets",
o="*",a={fire:function(a,b){var d=this,e,f,h,a=n(a);if(0<a.indexOf(" "))return m(a,function(a){f=d.fire(a,b);!1===f&&(e=!1)}),e;h=g(d,a,b);e=c._handle(d,h);!h.isPropagationStopped&&j(d,a)&&(f=d.bubble(a,h),!1!==e&&(e=f));return e},publish:function(a,b){var c=k(this);(a=n(a))&&(c[a]=b)},bubble:function(a,c){var d,e=f(this);b.each(e,function(b){b=b.fire(a,c);!1!==d&&(d=b)});return d},addTarget:function(a){f(this)[b.stamp(a)]=a},removeTarget:function(a){delete f(this)[b.stamp(a)]},on:h("add")};a.detach=
h("remove");return a},{requires:["./base","./object","./utils"]});
KISSY.add("event/utils",function(b,c){var d=document;return{splitAndRun:function(a,c){b.each(a.split(/\s+/),c)},batchForType:function(a,c,d,k){if(k&&0<k.indexOf(" ")){var f=b.makeArray(arguments);b.each(k.split(/\s+/),function(b){var h=[].concat(f);h.splice(0,4,d,b);a[c].apply(a,h)});return!0}return 0},isValidTarget:function(a){return a&&a.nodeType!==c.TEXT_NODE&&a.nodeType!==c.COMMENT_NODE},isIdenticalHandler:function(a,b,c){var d=a.scope||c,f=1,j=b.scope||c;if(a.fn!==b.fn||d!==j)f=0;else if((a=
a.data)!==(b=b.data))!a&&b||a&&!b?f=0:a&&b&&a.equals&&b.equals&&(a.equals(b,c)||(f=0));return f},simpleAdd:d.addEventListener?function(a,b,c,d){a.addEventListener&&a.addEventListener(b,c,!!d)}:function(a,b,c){a.attachEvent&&a.attachEvent("on"+b,c)},simpleRemove:d.removeEventListener?function(a,b,c,d){a.removeEventListener&&a.removeEventListener(b,c,!!d)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)}}},{requires:["dom"]});
KISSY.add("event/valuechange",function(b,c,d){function a(a){d.removeData(a,i);if(d.hasData(a,n)){var b=d.data(a,n);clearTimeout(b);d.removeData(a,n)}}function l(b){a(b.target)}function g(a){d.hasData(a,n)||d.data(a,n,setTimeout(function(){var b=a.value,f=d.data(a,i);b!==f&&(c.fire(a,j,{prevVal:f,newVal:b},!0),d.data(a,i,b));d.data(a,n,setTimeout(arguments.callee,m))},m))}function k(a){var b=a.target;"focus"==a.type&&d.data(b,i,b.value);g(b)}function f(b){a(b);c.remove(b,"blur",l);c.remove(b,"mousedown keyup keydown focus",
k)}var j="valuechange",h=d._nodeName,i="event/valuechange/history",n="event/valuechange/poll",m=50;c.special[j]={setup:function(){if(h(this,"input")||h(this,"textarea"))f(this),c.on(this,"blur",l),c.on(this,"mousedown keyup keydown focus",k)},tearDown:function(){f(this)}};return c},{requires:["./base","dom"]});KISSY.add("event",function(b,c,d,a,l){d.KeyCodes=c;d.Target=a;d.Object=l;return d},{requires:"event/keycodes,event/base,event/target,event/object,event/focusin,event/hashchange,event/valuechange,event/delegate,event/mouseenter,event/submit,event/change,event/mousewheel".split(",")});
